<?php

// 15-12-2011 - Daniel Bonfim

global $MIOLO;

//$MIOLO->Uses('controls/linkendereco.class','adm');

class gridVersaoSistemas extends MDataGrid2 {

    public function __construct() {
        global $MIOLO, $module, $page, $context, $self, $action, $perms, $state;

        $objversao = $MIOLO->GetBusiness('common','versaosistemas');

        // pega os campos do form para fazer a query
        //$query = $objversao->ListAll();
        $query = $objversao->listaVersao();
//                MForm::GetFormValue('idversao'), MForm::GetFormValue('dataversao'), MForm::GetFormValue('descricaoalteracoes')
//        var_dump($query->result);exit;
                
                

        $this->SetIndex(1);

        $hrefVersao = $MIOLO->getActionURL('main:versaosistemas', '#0#');

        $columns = array(
            new MDataGridColumn('versao', 'VERSÂO', '', false,'35%'),
            new MDataGridColumn('dataversao', 'DATA', '', false, '15%'),
            new MDataGridColumn('descricaoalteracoes', 'DESCRIÇÂO','',false,'50%')
        );

        // referencia a ele proprio
        $href_grid = $MIOLO->GetActionURL('versaosistemas', $self);

        parent::__construct($query, $columns, $href_grid, 25);
        $this->SetWidth('100%');
        $this->SetClose(null);
//        $this->SetLinkType('hyperlink');
    }

}
