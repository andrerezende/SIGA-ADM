<?php
class gridSistema extends MDataGrid
{
	function __construct()
	{

		$MIOLO = MIOLO::getInstance(); 
		$href = $MIOLO->getActionURL('common','main:mad:sistema:main','#0#');

		$columns = array(
			new MDataGridColumn('idSistema','Código','center',false,'10%'),
			new MDataGridHyperlink('sistema','Sistema',$href,'90%',true,NULL,true),
		);

		$sistema = MForm::GetFormValue('sistema');

		if ( is_null($sistema) )
		{
			$sistema = "%";
		}

		$obj = $MIOLO->GetBusiness('common','sistema');

		$query = $obj->listByNome(strtoupper($sistema));

		$hrefGrid = $MIOLO->GetActionURL('common','main:mad:sistema:find');

		parent::__construct($query,$columns,$hrefGrid,15);

		$this->SetFilter(false);
		$this->SetIndex(1);
		$this->SetLinkType('hyperlink');
	}

	function GenerateFooter()
	{
		if ( ! $this->data )
			$footer[] = $this->GenerateEmptyMsg();

		$footer[] = new MSeparator();
		$footer[] = $this->GenerateControls();
		return $footer;
	}
}
?>