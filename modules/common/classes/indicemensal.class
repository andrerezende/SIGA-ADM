<?php
class BusinessCommonIndiceMensal extends MBusiness
{
   var $idIndiceMensal;
   var $ano;
   var $mes;
   var $valor;
   var $sigla;

    function __construct($data=null)
    {
       parent::__construct('common',$data);
    }

    function getValor($ano,$mes,$sigla)
    {
        $criteria = $this->getCriteria();
        $criteria->addColumnAttribute('valor');
        $criteria->addCriteria('ano','=',"'$ano'");
        $criteria->addCriteria('mes','=',"'$mes'");
        $criteria->addCriteria('sigla','=',"'$sigla'");
        $query = $criteria->retrieveAsQuery();
        if ( ! $query->eof() )
        {
            return $query->result[0][0];
        }
        return 0;
    }

    function getByMesAnoSigla($mes,$ano,$sigla)
    {
        $criteria = $this->getCriteria();
        $criteria->addCriteria('mes','=',$mes);
        $criteria->addCriteria('ano','=',$ano);
        $criteria->addCriteria('sigla','=',"'$sigla'");
        $query = $criteria->retrieveAsQuery();
        if ( ! $query->eof() )
        {
            return  $this->retrieveFromCriteria($criteria);
        }
        else
        {
            $this->mes = $mes;
            $this->ano = $ano;
            $this->sigla = $sigla;
        }
    }

    function setValor($valor)
    {
        $this->valor = $valor;
    }
}
?>
