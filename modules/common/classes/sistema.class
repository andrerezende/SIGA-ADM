<?php

class BusinessCommonSistema extends Business
{
    var $idSistema;
    var $sistema;
    var $transacoes;  // cursor

    function __construct($data=null)
    {
       parent::__construct('common',$data);
    }

	function SetData($data)
	{
		$this->idSistema = $data->idSistema;
		$this->sistema = strtoupper($data->sistema);
	}

    function GetById($id)
    {
        $this->idSistema = $id;
        $this->retrieve();
        return $this;
    }

    function ListRange($range=NULL)
    {
        $sql = new sql('idsistema,sistema','cm_sistema', '','sistema');
        $sql->SetRange($range); 
        $query = $this->Query($sql);
        return $query;
    }


    function ListAll()
    {
        $criteria =  $this->getCriteria();
        return $criteria->retrieveAsQuery();
    }

    function listByNome($nome)
    {
        $criteria =  $this->getCriteria();
	$criteria->AddCriteria('sistema','like',"'%$nome%'");
        return $criteria->retrieveAsQuery();
    }
}
?>