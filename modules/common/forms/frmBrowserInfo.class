<?
class FrmBrowserInfo extends Form
{

	function FrmBrowserInfo()
    {   global $MIOLO, $module, $self;

		$this->Form('Informações sobre o browser');
        $this->AddJsCode($this->doBrowserInfo());
        $this->OnSubmit('doBrowserInfo()');
	}

    function CreateFields()
	{  global $MIOLO, $action;

       $fields = Array(
           array(
             new Text('','Resolução atual:   '),
             new TextField('fwidth','','',4),
             new Text('','X'),
             new TextField('fheight','','',4),
           ),
           new TextField('fnavigator','','Browser',40),
           array(
             new Text('','Resolução máximal:   '),
             new TextField('fmaxwidth','','',4),
             new Text('','X'),
             new TextField('fmaxheight','','',4),
           ),
           new TextField('fversion','','Versão',40),
           array(
             new Text('','Cor de resolução:   '),
             new TextField('fcolordepth','','',2),
             new Text('','bit'),
           ),
           new TextField('fcodename','','Nome',20),
           new TextField('fplatform','','Plataforma',20),
           new TextField('fcolor','','Cores',10),
           new TextField('fjava','','Java ativado',3),
           new TextField('ffonts','','Fontes aa',3),
           new TextField('fDHTML','','DHTML',3),
           new TextField('fLayers','','Layers',15)
       );
	   $this->SetFields($fields);
       $buttons = Array(
           new FormButton('btnPost', 'Enviar'),
       );

	   $this->SetButtons($buttons);
	}

    function doBrowserInfo()
    {
       $code = "function doBrowserInfo() { \n".
               "  var form = document." . $this->name . ";\n". 
               "  window.onerror=null;\n".
               "  colors = window.screen.colorDepth;\n".
               "  form.frm_fcolor.value = Math.pow (2, colors);\n".
               "  if (window.screen.fontSmoothingEnabled == true)\n".
               "  form.frm_ffonts.value = \"Yes\";\n".
               "  else form.frm_ffonts.value = \"No\";\n".
               "  form.frm_fnavigator.value = navigator.appName;\n".
               "  form.frm_fversion.value = navigator.appVersion;\n".
               "  form.frm_fcolordepth.value = window.screen.colorDepth;\n".
               "  form.frm_fwidth.value = window.screen.width;\n".
               "  form.frm_fheight.value = window.screen.height;\n".
               "  form.frm_fmaxwidth.value = window.screen.availWidth;\n".
               "  form.frm_fmaxheight.value = window.screen.availHeight;\n".
               "  form.frm_fcodename.value = navigator.appCodeName;\n".
               "  form.frm_fplatform.value = navigator.platform;\n".
               "  if (navigator.javaEnabled() < 1) form.frm_fjava.value=\"No\";\n".
               "  if (navigator.javaEnabled() == 1) form.frm_fjava.value=\"Yes\";\n".
               "  if(navigator.javaEnabled() && (navigator.appName != \"Microsoft Internet Explorer\")) {\n".
               "    vartool=java.awt.Toolkit.getDefaultToolkit();\n".
               "    addr=java.net.InetAddress.getLocalHost();\n".
               "    host=addr.getHostName();\n".
               "    ip=addr.getHostAddress();\n".
               "    alert(\"Your host name is '\" + host + \"'\\nYour IP address is \" + ip); \n".
               "  }\n".
               "  var isDHTML = 0;\n".
               "  var isLayers = 0;\n".
               "  var isAll = 0;\n".
               "  var isID = 0;\n".
               "  if (document.getElementById) {\n".
               "     isID = 1; isDHTML = 1;\n".
               "  } else {\n".
               "	browserVersion = parseInt(navigator.appVersion);\n".
               "	if ((navigator.appName.indexOf('Netscape') != -1) && (browserVersion == 4)) {\n".
               "		isLayers = 1; isDHTML = 1;\n".
               "	} else {\n".
               "		if (document.all) {\n".
               "			isAll = 1; isDHTML = 1;\n".
               "		}\n".
               "	}\n".
               "  }\n".
               "  if (isDHTML == 1)\n".
               "  form.frm_fDHTML.value = \"Yes\";\n".
               "  else form.frm_fDHTML.value = \"No\";\n".
               "  if (isID == 1) form.frm_fLayers.value = \"ID\";\n".
               "  if (isLayers == 1) form.frm_fLayers.value = \"Layers\";\n".
               "  if (isAll == 1) form.frm_fLayers.value = \"All\";\n".
               "  return true;\n".
               "}\n";
       return $code;
    }

}

?>
