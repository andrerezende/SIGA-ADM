<?
/**
/**
 * Formulário para relatório de execução financeira
 * 
 */
class frmRepExecucaoFinanceiraPorFatura extends Form
{
	var $objRequisicao;

	function __construct()
    {
		global $MIOLO;
        $this->Form('Relatório de Execução Financeira por Fatura');
		$this->SetClose($this->manager->GetActionURL('adm','main:relatorios'));
        $this->EventHandler();
    }

    function CreateFields()
    {
		global $MIOLO, $module;

		$this->objRequisicao = $MIOLO->GetBusiness($module,'requisicao');
		
		
		$fields = array(
			
			new CalendarField('calDataInicial','','Data Inicial'),
			new CalendarField('calDataFinal','','Data Final'),
						
						);

       	$this->SetFields($fields);
       	
       	
		
		$button = array(
			new FormButton('btnRelatorio','Gerar Relatório','PDF'),
		);
       	$this->SetButtons($button);
		$this->defaultButton = false;
	}
	
	 function GetData()
    {
		
		
		$data = new FormData();
        $data->dtInicial = $this->GetFieldValue('calDataInicial');
		$data->dtFinal = $this->GetFieldValue('calDataFinal');
   	
    	return $data;
    }
    function SetData($data)
	{
		$this->SetFieldValue('calDataInicial',$data->dtInicial);
		$this->SetFieldValue('calDataFinal',$data->dtFinal);
			
		
	}

	function btnRelatorio_click()
    {   global $MIOLO, $module, $item;

		$ui = $MIOLO->GetUI();
		
		$report = $ui->GetReport($module,'repExecucaoFinanceiraPorFatura');
        $report->Generate();
    }

}
?>
