<?php
global $MIOLO;

// 15-12-2011 - Daniel Bonfim
$MIOLO->Uses('controls/linkendereco.class','adm');

class frmEnderecoFind extends MForm {
	function __construct() {
		global $MIOLO, $module, $action;
		parent::__construct('Pesquisar Endereço');
		$this->SetClose($MIOLO->GetActionURL($module,'main:endereco'));
		$this->EventHandler();
	}

	function CreateFields() {
		global $MIOLO, $module, $action;
                
                $endereco = $MIOLO->GetBusiness('adm', 'endereco');
                $endereco->listEndereco();

		$ui = $MIOLO->GetUI();
		$grid = $ui->GetGrid('adm','gridEndereco');
		$grid->SetTitle(NULL);

		$findButton = new ButtonFind('');
		$findButton->SetName('btnFind');
                
                $lnkEndereco = new LinkEndereco('lnkEnderecoNew', FALSE);
		$lnkEndereco->setNovoEndereco();
        
		$fields = array(
			array(
                            new MTextField('nomelocal','','Local',20),
                            new MTextField('endereco','','Endereço',20),
                            new MTextField('bairro','','Bairro',15),                            
                            new MTextField('cep','','cep',15),
                            new MTextField('cidade','','Cidade',15),
                            new MTextField('estado','','Estado',5),
				$findButton,                            
			),
                    
                        $lnkEndereco,
			new MSpacer(1),
			$grid
		);

		$this->SetFields($fields);
		$this->defaultButton = false;
	}
}