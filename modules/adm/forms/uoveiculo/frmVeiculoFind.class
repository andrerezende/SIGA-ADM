<?
global $MIOLO;
/**
 * Use Module Control
 */
$MIOLO->Uses('controls/linkuoveiculo.class','adm');
class frmVeiculoFind extends MForm
{
    protected $objUoVeiculo;
    function __construct($objUo)
    {
		global $MIOLO, $module;
        $this->objUoVeiculo = $objUo;
        parent::__construct('Pesquisar VeÃ­culos');
		$this->SetClose($MIOLO->GetActionURL($module,'main'));
        $this->EventHandler();
    }
    function CreateFields(){  
        global $MIOLO,$item;
        $findButton = new ButtonFind('');
        $findButton->SetName('btnFind');
        $lnkNew = new LinkUoVeiculo('lnkNew', FALSE);
        $lnkNew->setNew();
        $session = $MIOLO->getSession();
        $session->setValue('itemuov', $item);
                
        $idReq = new MTextField('idRequisicao',Form::getFormValue('idRequisicao'),'',8);
        $grid = $this->manager->getUI()->getGrid('adm','gridVeiculo1',$this->objUoVeiculo);
        $fields = array(
            $lnkNew,
            array(
                new Text('','Veiculo:'),
                new TextField('veiculo','','',15),
                $findButton,
            ),           
			$grid,
		);
        $this->setFields($fields);
        $this->defaultButton = false;
        $idReq->addAttribute('maxlength',9);
    }
 }
?>
