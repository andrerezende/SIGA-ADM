<?
class frmRepBolsa extends Form
{
	function frmRepBolsa()
    {   
		global $page;
		$this->Form('Relatório de Bolsas');
		if ($page->IsPostBack())
		{
			$this->EventHandler();
		}
	}

	function CreateFields()
	{
		global $MIOLO, $module;
		$fields =  array(
			new TextLabel('lblNumRegs','')
		);
		$this->SetFields($fields);

		$buttons = array(
			new FormButton('btnRepBolsa','Gerar Relatório','PDF')
		);
		$this->SetButtons($buttons);

		$objBolsa = $MIOLO->GetBusiness($module,'bolsa');
		$numregs = $objBolsa->GetNumRegs();
		if( $numregs>0 )
		{
			$numregs = 'Número de registros: '.$numregs;
		}
		else
		{
			$numregs = 'INFO: Não existem bolsas cadastradas para gerar o relatório!';
			$this->SetButtonAttr('btnRepBolsa','label','Formulário de Cadastramento de Bolsa');
			$this->SetButtonAttr('btnRepBolsa','action',$MIOLO->GetActionURL($module,'main:cadbolsa'));	
		}	
		$this->SetFieldValue('lblNumRegs',$numregs);
		$this->SetClose($MIOLO->GetActionURL($module,'main:sispag'));
	}

  function btnRepBolsa_click()
  {
		global $MIOLO,$module;
			
	    $ui = $MIOLO->GetUI();
    	$report = $ui->GetReport($module,'repBolsa');
	    $report->Generate();
  }
}
?>
