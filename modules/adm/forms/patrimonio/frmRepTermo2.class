<?
class frmRepTermo2 extends MForm
{
    function __construct()
    {
        parent::__construct('Termo de Responsabilidade');
        $this->EventHandler();
		$this->defaultButton = false;
    }

	function CreateFields()
    {
		global $MIOLO, $module, $action, $item, $theme;

		$fields = array(
		                 new MTextField('iditempatrimonio','','Numero item de',20),
		                 new MTextField('iditempatrimonio1','','Até Número ',20),


		);

		$this->SetFields($fields);

		$buttons = array(
			new MButton('btnPost','Gerar Relatório',''),
		);
		$this->SetButtons($buttons);
	}

function btnPost_click()
    {
	global $MIOLO, $module, $item;

	$iditempatrimonio= Form::GetFormValue('iditempatrimonio');
	$iditempatrimonio1= Form::GetFormValue('iditempatrimonio1');

	if((is_numeric($iditempatrimonio) && is_numeric($iditempatrimonio1))){

	$report = new MJasperReport('sigaept');
	$parameters['SUBREPORT_DIR']	= $MIOLO->GetConf('home.modules');
	$parameters['int_pIdUsuario']	= $MIOLO->login->idkey;
	$parameters['int_pIdItem']	= $iditempatrimonio;
	$parameters['int_pItem2']	= $iditempatrimonio1;

	$parameters['pURL']		= $MIOLO->GetConf('home.url');
	$report->Execute('adm', 'repTermo2', $parameters);
	}else{
	    $this->AddError("Certifique-se de que os filtros são valores numéricos válidos!");
	}



    }
}
?>
