<?
class frmRepBalancete extends MForm
{
    function __construct()
    {
        parent::__construct('Balancete');
        $this->EventHandler();
		$this->defaultButton = false;
    }

	function CreateFields()
    {
		global $MIOLO, $module, $action, $item, $theme;

		$fields = array(
			new MCalendarField('dataInicial','','A partir de',20),
			new MCalendarField('dataFinal','','Até',20),
		);
		$this->SetFields($fields);

		$buttons = array(
			new MButton('btnPost','Gerar Relatório','PDF'),
		);
		$this->SetButtons($buttons);
	}

    function btnPost_click()
    {
		global $MIOLO, $module, $item;

	    $report = new MJasperReport('sigaept');
		$parameters['SUBREPORT_DIR'] = $MIOLO->GetConf('home.modules');
//		$parameters['pURL']          = $MIOLO->GetConf('home.url');

		$parameters['pDataIni']  = Form::GetFormValue('dataInicial');
		$parameters['pDataFim']  = Form::GetFormValue('dataFinal');
	    $report->Execute('adm', 'RelBalancete', $parameters);
	}
/*    function btnPost_click()
    {
		global $MIOLO, $module, $item;

		$ui = $MIOLO->GetUI();
        $report = $ui->GetReport($module,'repBalancete');
        $report->Generate();
	}
*/	
}
?>
