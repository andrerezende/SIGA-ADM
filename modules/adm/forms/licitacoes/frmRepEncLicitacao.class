<?
class frmRepEncLicitacao extends MForm
{
	protected $objLicitacao;    

	function __construct($licitacao)
    {
        $this->objLicitacao = $licitacao;
        parent::__construct('Fechamento de Licitação');
        $this->EventHandler();
		$this->defaultButton = false;
    }

	function CreateFields()
    {
		global $MIOLO, $module, $action, $item, $theme;

		$fields = array(
			new MTextField('enc','','Encaminhamento',5),
			new MTextField('legislacao','','Legislação',80),
		);
		$this->SetFields($fields);

		$buttons = array(
			new MButton('btnPost','Gerar Relatório','PDF'),
		);
		$this->SetButtons($buttons);
	}

    function btnPost_click()
    {
		global $MIOLO, $module, $item;

		$ui = $MIOLO->GetUI();
        $report = $ui->GetReport($module,'repEncLicitacao',array('licitacao'=>$this->objLicitacao->numero));
        $report->Generate();
	}
}
?>
