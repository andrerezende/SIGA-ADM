<?
class frmLicitacaoFinalizaProposta extends Form
{
	protected $objLicitacao;

    function __construct($licitacao)
    {
		global $MIOLO;
        
        $this->objLicitacao = $licitacao;
        $this->Form(NULL);
        $this->EventHandler();        
    }

    function CreateFields()
    {
        global $MIOLO,$module,$item;
        
	    $buttons = Array(
			new FormButton('btnFinalizarProposta','Finalizar Propostas'),
	    );
    
	    $this->SetButtons($buttons);
    }

	function btnFinalizarProposta_click()
	{
		global $MIOLO, $module,$item, $page, $theme, $action;
	
        $this->objLicitacao->alteraStatus('3');    
		try
		{
			$this->objLicitacao->save();
            $action = $this->manager->GetActionURL('adm','main:licitacoes',$this->objLicitacao->idLicitacao);
    		$this->manager->information("InclusÃ£o de propostas concluida com sucesso.",$action);
		}
		catch (Exception $e)
		{
			$this->AddError("Informe o seguinte erro a equipe do CGCO: ".$e->getMessage());
		}

	}
 }
?>
