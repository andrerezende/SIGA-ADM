<?
//form criado para licitaçãode compra permanente fique igual a compra consumo
$MIOLO->Uses('controls/linklicitacao.class','adm');

class frmListarMaterialPermanenteALicitar extends MForm
{
	private $radioOpcoesEscolha;

	function __construct()
    {
       parent::__construct();
       $this->EventHandler();
     
    }

    function CreateFields()    
    {
       global $MIOLO, $action,$perms;
       $ui = $MIOLO->GetUI();
       
         
      // $this->radioOpcoesEscolha = $this->GetFormValue('radioOpcoes');

       if (!$this->radioOpcoesEscolha)
       		$this->radioOpcoesEscolha = "Todos";
       
       $this->SetTitle('Itens da Requisição de cada licitação. Ver itens: ' . $this->radioOpcoesEscolha);

       $this->defaultButton = false;
        
       /**
        * Filtro por UFJF ou HU
        */
       /*$opcoes = array( 'UFJF', 'HU', 'Todos' ); 
       
       $radioOpcoes  = new MRadioButtonGroup( 'radioOpcoes', 'Escolha o local da licitação', $opcoes, $this->radioOpcoesEscolha, '', 'horizontal', 'css' );
       $radioOpcoes->setAutoPostBack(true); 
       
       */
       
       $fields = array
	   (
	   		new MSpacer(1),
			$radioOpcoes,
			new MSpacer(1),
				
				$ui->GetGrid('adm','gridItensALicitarAjaxPermanente',$this->radioOpcoesEscolha)
	  );
	  
	  
	   if ($perms->CheckAccess('ADM_ABRELICITACAO',A_EXECUTE))
        {
            $lnkNew1 = new LinkLicitacao('lnkNew', FALSE);
            
            if ($this->radioOpcoesEscolha=="HU")
            {            
            	$lnkNew1->setNew(325);       
            }
            else 
            {            
            	$lnkNew1->setNew("PERMANENTE");       
            }
            
            
            $fields[] = array($lnkNew1,new MSpacer(1));
        }
	  
                    
       $this->SetFields($fields); 
    }

    
   
    
}


?>
