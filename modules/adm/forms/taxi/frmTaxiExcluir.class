<?
/**
 * Formulário de exclusão taxi
 */
class frmTaxiExcluir extends Form
{
	/**
	 * Objeto taxi
	 * @access protected
	 * 
	 */
	protected $objTaxi;

	function __construct($objTaxi)
	{
		$this->objTaxi = $objTaxi;
		parent::__construct('Excluir Taxi');
		$this->EventHandler();
	}

	function CreateFields()
	{
		$action_sim = $this->manager->GetActionURL('adm','main:taxi',$this->objTaxi->dataIni,array('form'=>'excluir','conf'=>'sim'));
		$action_nao = $this->manager->GetActionURL('adm','main:taxi',$this->objTaxi->dataIni);

		$conf = $this->GetFormValue('conf');

		if ($conf == 'sim')
		{
			try
			{
				$this->objTaxi->Delete();
				$this->objTaxi->Log(OP_DEL,"Valor excluído");


				$go = $this->manager->GetActionURL('adm','main:taxi:find',$this->dataIni);
				$this->manager->information("Taxi excluído com sucesso!",$go );
			}
			catch (Exception $e)
			{
				$this->manager->Error("Informe o seguinte erro à equipe do CGCO: ".$e->getMessage,$this->manager->GetActionURL('adm','main:taxi',$this->objTaxi->dataIni));
			}
		}
		else
		{
			$this->manager->Question("Tem certeza que deseja excluir esse taxi?",$action_sim,$action_nao);
		}

	}

}
?>
