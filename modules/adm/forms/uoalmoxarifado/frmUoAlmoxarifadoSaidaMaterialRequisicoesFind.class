<?

class frmUoAlmoxarifadoSaidaMaterialRequisicoesFind extends MForm {

    protected $uoalmoxarifado;

    function __construct($objUo) {
        global $MIOLO, $module;
        $this->uoalmoxarifado = $objUo;
        parent::__construct('Pesquisa de requisições de almoxarifado');
        $this->SetClose($MIOLO->GetActionURL($module, 'main'));
        $this->EventHandler();
        $this->page->addJsCode(file_get_contents(dirname(__FILE__) . '/../../ui/js/mask.js'));
        $this->page->addJsCode(file_get_contents(dirname(__FILE__) . '/../../ui/js/maskMoney.js'));
    }

    function CreateFields() {
        $idReq = new MTextField('idRequisicao', Form::getFormValue('idRequisicao'),'', 8);
//        $this->idRequisicao->addAttribute('onKeyUp', 'makeMask(this, \'##/##/####\');');
//        $this->idRequisicao->addAttribute('onBlur', 'makeMask(this, \'##/##/####\');');
        $grid = $this->manager->getUI()->getGrid('adm', 'gridUoAlmoxarifadoSaidaMaterialRequisicoesFind', $this->uoalmoxarifado);
        $busca = new MThemeBox('&nbsp;&nbsp;Buscar por', array(new MLabel('Número:'), $idReq, new MLabel('ou Requisitante:'), new MTextField('requisitante', Form::getFormValue('requisitante'), '', 40), new MButton('btnPost', 'Buscar')));
//        var_dump($busca);exit;
        $lista = new MThemeBox('&nbsp;&nbsp;Listar', array(new MLabel('Empenhos:'), new MSelection('lista', Form::getFormValue('lista'), '', array('%' => 'Todos', 1 => 'A serem numerados', 2 => 'A dar entrada de material')), new MButton('btnPost', 'Listar')));
        $fields = array($busca, $grid,);
        $this->defaultButton = false;

        $this->setFields($fields);
        
        $idReq->addAttribute('maxlength', 9);
        
    }

}

?>
