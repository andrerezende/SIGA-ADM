<?
class frmUoAlmoxarifadoBoletimDiario extends MCompoundForm
{
    protected $uoalmoxarifado;
    protected $ordem;
    function __construct($objUO)
    {
        global $MIOLO;
        $this->uoalmoxarifado = $objUO;
		parent::__construct("Boletim Diário");
        $this->eventHandler();
    }
    function CreateFields()
    {
        $fields = array
        (
			new MCalendarField('dataInicio',date('d/m/Y'),'Data Inicial',10,'informe a data inicial do relatório.'),
			new MCalendarField('dataFim',date('d/m/Y'),'Data Final',10,'informe a data final do relatório.'),
        );
        $this->setFields($fields);
	    $buttons = array
        (
	        new MButton('btnReport','Gerar Relatório','PDF'),
	    );
        $this->setButtons($buttons);
    }
    function btnReport_click()
    {
	    $k = new MKrono();
        switch (true)
        {
            case (!Form::getFormValue('dataInicio')):
                $this->addInfo('Selecione a data inicial.');
            return;
            case (!Form::getFormValue('dataFim')):
                $this->addInfo('Selecione a data final.');
            return;
            /*
            case ($k->DaysDiff(Form::getFormValue('dataInicio'),Form::getFormValue('dataFim')) > 31):
                $this->addInfo('O período deve ser menor que 31 dias.');
            return;
            */
        }
        $ui = $this->manager->GetUI();
        $report = $ui->GetReport('adm','repUoAlmoxarifadoBoletimDiario',$this->uoalmoxarifado);
        $report->Generate();
    }
 }
?>
