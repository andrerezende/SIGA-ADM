<?
MIOLO::Import('modules::adm::forms::valetransporte::frmValeTransportePai');

class frmValeTransporteNew extends frmValeTransportePai
{
    function __construct()
    {
        $this->Form('Incluir Novo Valor');
        $this->EventHandler();
    }

	function CreateFields()
    {
	   $this->CommonFields();
	   $buttons = array
		   (
        	  new FormButton("btnNew","Cadastrar Valor")
           );
	   $this->SetButtons($buttons);
	}

    function btnNew_click()
    {
        $data = $this->GetData();
        $valetransporte = $this->manager->GetBusiness('adm','valetransporte');
		$valetransporte->SetData($data);
		try
		{
        	$valetransporte->save();
			$valetransporte->Log(OP_INS,"Novo valor de vale transporte criado");
	        $go = $this->manager->GetActionURL('adm','main:valetransporte:find',$valetransporte->dataIni);
			$this->manager->information("Novo valor de vale transporte criado.",$go );
			
		}
		catch (Exception $e)
		{
			$this->addError($e->getMessage());
		}
    }
 }
?>
