<?php
class gridUoVeiculoVeiculo extends MObjectGrid
{
    protected $objUoVeiculo;
    function __construct($objUo)
    {
        global $MIOLO, $page;
        $this->objUoVeiculo = $objUo;
	$cf = new MCurrencyFormatter();
        $this->setTitle('Resultados Encontrados');
        $href = $MIOLO->getActionURL('adm','main:uoveiculo',$this->objUoVeiculo->idUo,array('form'=>'veiculo','idRequisicao'=>'#0#'));
        $columns = array(
            //new MObjectGridHyperlink('idRequisicao','NÃºmero',$href,'8%'),
            new MObjectGridHyperlink('veiculo','Placa',$href,'8%'),
            //new DataGridControl($linkVeiculo,'veiculo','Placa','center', true,'10%'),
	   // new MObjectGridColumn('dataHora','Data/Hora','center','true','30%'),
            new MObjectGridColumn('marcamodelo','Marca/Modelo','left', 'true','50%'),
            new MObjectGridColumn('cor','Cor','center', 'true','20%'),
            new MObjectGridColumn('renavam','Renavam','center', 'true','20%')
         );
        $this->setFilter(false);
        $idRequisicao = Form::getFormValue('idRequisicao');
        $requisitante = Form::getFormValue('requisitante');
        $objVeiculo = $MIOLO->GetBusiness('adm','veiculo');
        $query = $objVeiculo->ListByPlaca2(strtoupper("'$veiculo%'"));
        //$requisicoes = $this->objUoVeiculo->listRequisicoesForAlmoxarifado($idRequisicao,$requisitante);
        $cf = new MCurrencyFormatter();
        
        $href_grid = $MIOLO->getActionURL('adm','main:uoveiculo',$this->objUoVeiculo->idUo,array('form'=>'veiculo'));
        //parent::__construct($requisicoes, $columns, $href_grid,25);
        parent::__construct($query, $columns, $href_grid,25);
        $this->SetLinkType('hyperlink');
        $this->with = '100%';
        //$href = $this->manager->GetActionURL('adm','main:empenho:new','', array('idEmpenho'=>'$id') );
    }
}
