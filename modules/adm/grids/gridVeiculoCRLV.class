<?
/**
 * Grid Uo
 * Grid para listar os materiais da requisição de almoxarifado
 * @package br.org.miolo.ufjf.adm.grids
 */
/**
 * Use Module Control
 */

class gridVeiculoCRLV extends MDataGrid2
{
    
    function __construct()
    {
        global $MIOLO;
        $columns = array(
            new MDataGridColumn('idcrlv','IdCRLV','','','',false),
            new MDataGridColumn('exercicio','Exercício','center','','10%'),
            new MDataGridColumn('uf','UF','center','','5%'),
            new MDataGridColumn('categoria','Categoria','center','','5%'),
            new MDataGridColumn('cnpjcpf','CNPJ/CPF','center','','20%'),
            new MDataGridColumn('nome','Nome','left','','53%'),
            new MDataGridColumn('ativo','Ativo','center','','7%'),            
        );
        
        $placa = $_GET['item'];         
        $form = $_GET['action'];         
        
        $href_grid = $MIOLO->GetActionURL('adm','main:requisicoes');
        $veiculoCRLV = $MIOLO->getBusiness('adm', 'veiculocrlv');
        $query =  $veiculoCRLV->ListAllByPlaca($placa);
        $href_update = $MIOLO->GetActionURL('adm','main:veiculo', $placa,array('form'=>'editarCRLV', 'id' => '%0%'));
        
        parent::__construct($query,$columns,$href_grid,0);
        if ($form == 'main:veiculo') $this->AddActionUpdate($href_update);
        $this->SetLinkType('hyperlink');
        $this->SetTitle('Lista de CRLVs do veículo');
        $this->SetClose(null);
    }
    
}

