<?
/**
 * Grid Uo
 * Grid para listar os materiais da requisição de almoxarifado
 * @package br.org.miolo.ufjf.adm.grids
 */
/**
 * Use Module Control
 */

class gridItinerarioEndereco extends MDataGrid
{
     protected $objRequisicao;
     private $form;
    function __construct($requisicao)
    {
        global $MIOLO, $module;
        $this->objRequisicao = $requisicao;
        $columns = array(
            new MDataGridColumn('idrequisicao','ID Requisicao','center',True,'10%'),
            new MDataGridColumn('Ordem','Ordem','center',true,'20%'),
            new MDataGridColumn('origem','Local de Origem','center',true,'20%'),
            new MDataGridColumn('destino','Local de Destino','center',FALSE,'20%'),
            new MDataGridColumn('dataSaida','Data de Saída','center',FALSE,'25%'),
            new MDataGridColumn('horasaida','Horário de Saída','center',FALSE,'25%'),

        );

        $href_grid = $MIOLO->GetActionURL('adm','main:requisicoes',$this->objRequisicao->idRequisicao);
        $objItinerario = $MIOLO->GetBusiness($module, 'itinerario');


        $idRequisicao=$this->objRequisicao->idRequisicao;

       $lista=$objItinerario->GetByIDRequisicao($idRequisicao);
       //var_dump($lista->result);exit;
        parent::__construct($lista,$columns,$href_grid,20);

		$href_update = $MIOLO->GetActionURL('adm','main:requisicoes',$this->objRequisicao->idRequisicao,array('form'=>'item','ordem'=>'%1%','tipoReq'=>15));
		$this->AddActionUpdate($href_update);
        $this->SetLinkType('hyperlink');
        $this->SetTitle('Itinerário');
        $this->SetClose(null);
    }
    function GenerateFooter()
    {
        global $MIOLO,$module;
        $go = $MIOLO->GetActionURL('adm','main:requisicoes',$this->objRequisicao->idRequisicao,array('form'=>'item','tipoReq'=>15));
//        $ui = $this->manager->getUi();
//         $this->form = $ui->GetForm($module,'frmItinerarioNew',$this->objRequisicao,'requisicoes');
            if ($this->objItinerario->NovoItinerario){


            }else{
            //$footer[] = $this->GenerateEmptyMsg();
            }

        $footer[] = new MSpacer('5px');
        //$footer[] = new MLink('new','Inserir Novo Itinerário',$go);
        //$footer[] = new MLink('new','Inserir Novo Itinerário',$MIOLO->GetUI()->GetForm($module,'frmItinerarioNew',$this->objRequisicao,'requisicoes'));
        $footer[] = new MSpacer('5px');
        return $footer;
    }
}

?>