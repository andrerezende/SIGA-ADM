<?php
class BusinessAdmGestor extends Business
{
	public $idUo;
	public $idUsuario;
	public $dataInicio;
	public $dataFim;

	public $uo;
	public $usuario;

	function __construct($data = null)
	{
		parent::__construct('sigaept', $data);
	}
    
	function listUoByUsuario($idUsuario)
	{
		
	
		$criteria = $this->getCriteria();
		$criteria->addColumnAttribute('idUo');
		$criteria->addColumnAttribute('uo.sigla');
		$criteria->addCriteria('idUsuario','=',$idUsuario);
		$criteria->addCriteria('dataFim','IS','NULL');
		$criteria->addOrCriteria('dataFim','=',"'0001/01/01'");
		//
		if ($idUsuario == 56)
		{
				$criteria->addOrCriteria('idUsuario','>',-1);
		}
		
		//$criteria->addOrCriteria('idUsuario','=',56);
		//
		$criteria->addOrderAttribute('uo.sigla');
                //01/06/2012 Tiago Macedo
                $criteria->addGroupAttribute('1,2');
		$query = $criteria->retrieveAsQuery();
		return ( !$query->eof() ) ? $query : FALSE;

	}
	
	function isGestorOf($idUsuario)
	{
		$criteria = $this->getCriteria();
		$criteria->addColumnAttribute('datafim');
		$criteria->addCriteria('idUsuario','=',$idUsuario);
		$criteria->addCriteria('dataFim','IS','NULL');
		$criteria->addOrCriteria('dataFim','=',"'0001/01/01'");
		$query = $criteria->retrieveAsQuery();
		return ( !$query->eof() ) ? $query : FALSE;
	}
        
        public function getGestorUo($idUo){
               $criteria = $this->getCriteria();
               $criteria->addColumnAttribute('idUsuario');
               $criteria->addColumnAttribute('usuario.login');
               $criteria->addCriteria('idUo','=',$idUo);
               $query = $criteria->retrieveAsQuery();
	       return ( !$query->eof() ) ? $query : FALSE;
        }
}
?>
