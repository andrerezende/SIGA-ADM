<?
class BusinessAdmExecutor extends Business
{
	public $idExecutorServInt;
    public $idTipoServInt;
	public $idUsuario;
	public $dataInicio;
	public $dataFim;

	public $uo;
	public $usuario;

	function __construct($data = null)
	{
		parent::__construct('sigaept', $data);
	}

	function listUoByUsuario($idUsuario)
	{
		$criteria = $this->getCriteria();
		$criteria->addColumnAttribute('idUo');
		$criteria->addColumnAttribute('uo.sigla');
		$criteria->addCriteria('idUsuario','=',$idUsuario);
		$criteria->addCriteria('dataFim','IS','NULL');
		$criteria->addOrCriteria('dataFim','=',"'0001/01/01'");
		$query = $criteria->retrieveAsQuery();
		return ( !$query->eof() ) ? $query : FALSE;
	}
	
	function isExecutorOf($idUsuario)
	{
		$criteria = $this->getCriteria();
		$criteria->addColumnAttribute('datafim');
		$criteria->addCriteria('idUsuario','=',$idUsuario);
		$criteria->addCriteria('dataFim','IS','NULL');
		$criteria->addOrCriteria('dataFim','=',"'0001/01/01'");
		$query = $criteria->retrieveAsQuery();
		return ( !$query->eof() ) ? $query : FALSE;
	}
}
?>
