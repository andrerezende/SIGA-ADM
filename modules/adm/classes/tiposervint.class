<?
class BusinessAdmTipoServInt extends Business
{
	public $idTipoServInt;
	public $descricao;
	public $idUoPrestadora;
	public $idRubrica;
	public $rubrica;
	public $itemServInt;
	public $uoPrestadora;

	function __construct($data = null)
	{
		parent::__construct('sigaept', $data);
	}

	function OnCreate($data)
	{
		if (empty($data))
		{
			//            $this->initialize();
		}
		else
		{
			$this->GetById($data);
		}
	}

	function GetById($id)
	{
		$this->idTipoServInt = $id;
		$this->retrieve();
		return $this;
	}

	function ListAll()
	{
		$criteria =  $this->getCriteria();
		return $criteria->retrieveAsQuery();
	}

	function ListByNome($nome)
	{
		$criteria =  $this->getCriteria();
		$criteria->addCriteria('descricao','LIKE', "$nome");
		$criteria->addOrderAttribute('pessoa.descricao');
		return $criteria->retrieveAsQuery();
	}
	
	function getIdUoPrestadora()
	{
		return $this->idUoPrestadora;
	}

	function DeleteExecutores()
	{
		$sql = new sql();
		$sql->SetTables('ad_executorservint');
		$sql->SetWhere("idtiposervint = $this->idTipoServInt");
		try
		{
			$this->Execute($sql->Delete());
			$ok = true;
		}
		catch(Exception $e)
		{				
			$ok = false;
		}
		return $ok;
	}

}
?>