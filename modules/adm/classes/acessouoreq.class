<?
class BusinessAdmAcessouoreq extends Business
{
	public $idUo;
	public $idUsuario;

	public $uo;
	public $usuario;

	function __construct($data = null)
	{
		parent::__construct('sigaept', $data);
	}
    
	function listUoByUsuario($idUsuario)
	{
		$criteria = $this->getCriteria();
		$criteria->addColumnAttribute('idUo');
		$criteria->addCriteria('idUsuario','=',$idUsuario);
		$query = $criteria->retrieveAsQuery();
		return ( !$query->eof() ) ? $query : FALSE;
	}
    
	function isRequisitanteDaGaragem($idUsuario)
	{
		$criteria = $this->getCriteria();
		$criteria->addColumnAttribute('idUo');
        $criteria->addCriteria('idUo','=','1');
		$criteria->addCriteria('idUsuario','=',$idUsuario);
		$query = $criteria->retrieveAsQuery();
		return ( !$query->eof() ) ? $query : FALSE;
	}

	function isRequisitanteDaUo($idUsuario,$idUo)
	{
		$criteria = $this->getCriteria();
		$criteria->addColumnAttribute('idUo');
		$criteria->addCriteria('idUo','=',$idUo);
		$criteria->addCriteria('idUsuario','=',$idUsuario);
		$query = $criteria->retrieveAsQuery();
		return ( !$query->eof() ) ? $query : FALSE;
	}
        
        function UserisRequisitanteDaUo($idUsuario,$idUo)
	{
		$criteria = $this->getCriteria();
		$criteria->addColumnAttribute('idUo');
		$criteria->addCriteria('idUo','=',$idUo);
		$criteria->addCriteria('idUsuario','=',$idUsuario);
		$query = $criteria->retrieveAsQuery();
		return ( !$query->eof() ) ? TRUE : FALSE;
	}

	function listUoSaldoPublicoByUsuario($idUsuario)
	{
		$criteria = $this->getCriteria();
		$criteria->addColumnAttribute('idUo');
		$criteria->addColumnAttribute('uo.sigla');
        $criteria->addOrderAttribute('uo.sigla');
		$criteria->addCriteria('idUsuario','=',$idUsuario);
		$criteria->addCriteria('uo.saldoPublico','=',"'S'");
		$query = $criteria->retrieveAsQuery();
		return ( !$query->eof() ) ? $query : FALSE;
	}
    
}
?>
