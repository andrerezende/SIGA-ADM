<?
class BusinessAdmHotel extends Business
{
	public $idHotel;
	public $nome;
	public $ativo;
    public $valorDiaria;

	function __construct($data = null)
	{
		parent::__construct('sigaept', $data);
	}

    function OnCreate($data)
    {
        if (empty($data))
        {

        }
        else
        {
            $this->GetById($data);
        }
    }

	function GetById($id)
	{
		$this->idHotel = $id;
		$this->retrieve();
		return $this;
	}

	function ListAll()
	{
        $criteria =  $this->getCriteria();
        return $criteria->retrieveAsQuery();
	}

	function ListByNome($nome)
	{
		$nome = strtoupper($nome);
		$criteria =  $this->getCriteria();
		$criteria->addCriteria('upper(nome)','LIKE', "'%$nome%'");
		$criteria->addOrderAttribute('nome');
		return $criteria->retrieveAsQuery();
	}
	
	function ListAtivos()
	{
		$criteria =  $this->getCriteria();
		$criteria->addCriteria('ativo','=', "'S'");
		$criteria->addOrCriteria('ativo','=', "'1'");
		return $criteria->retrieveAsQuery();
	}
	function countAtivos()
	{
		$sql = new sql('count(*) as numregs','ad_hotel');
		$query = $this->Query($sql);
		return $query->result[0][0];
	}


}

	
?>
