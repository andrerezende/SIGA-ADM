<?
class BusinessAdmPtr extends Business
{

    public $idPtr;
    public $descricao;
    public $progTrab;
    public $uorcamento;

    function __construct($data = null)
    {
       parent::__construct('sigaept',$data);
    }

    function OnCreate($data)
    {
        if (!empty($data))
        {
            $this->GetById($data);
        }
    }
    
    function GetById($idPtr)
    {
      $this->idPtr = $idPtr;
      $this->retrieve();
      return $this;
    }   

    function ListById($id)
    {
        $criteria =  $this->getCriteria();
        $criteria->addCriteria('idPtr','LIKE', "'%$id%'");
        $criteria->addOrderAttribute('idPtr');
        return $criteria->retrieveAsQuery();
    }

    function ListByDescricao($descricao)
    {
        $descricao = strtoupper($descricao);
        $criteria =  $this->getCriteria();
        $criteria->addCriteria('descricao','LIKE', "'%$descricao%'");
        $criteria->addOrderAttribute('idPtr');
        return $criteria->retrieveAsQuery();
    }

    function ListAll()
    {
        $criteria =  $this->getCriteria();
        $criteria->AddColumnAttribute('idPtr');
        $criteria->AddColumnAttribute('descricao');
        $criteria->addOrderAttribute('descricao');
        return $criteria->retrieveAsQuery();
    }
}
?>
