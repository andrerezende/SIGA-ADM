<?
class BusinessAdmVeiculoUo extends Business
{
	public $placa;
	public $idUo;

	function __construct($data = null)
	{
		parent::__construct('sigaept', $data);
	}

    function OnCreate($data)
    {
        if (empty($data))
        {

        }
        else
        {
            $this->GetById($data);
        }
    }

	function GetById($placa,$idUo)
	{
		$this->$placa = $placa;
                $this->$idUo = $idUo;
		$this->retrieve();
		return $this;
	}

	function ListAll()
	{
        $criteria =  $this->getCriteria();
        return $criteria->retrieveAsQuery();
	}
        
        function verVeiculoUo($placa,$iduo)
	{
        $sql = new sql('placa, iduo','');
        $sql->SetWhere('u.iduo = '.$iduo);
        //$sql->SetWhereAnd('u.iduo = '.$iduo);
        return $this->Query($sql);
        }
        
        public function listVeiculouo($iduo, $placa){
        $query.= "DISTINCT u.placa
           from ad_veiculouo u 
           where u.iduo = $iduo and u.placa LIKE '$placa'";
		$sql = new sql($query);
                $query2 = $this->Query($sql);
                if($query2->result){
                   $ret = TRUE; 
                }else{
                   $ret = FALSE; 
                }
                return $ret;
        }
        
        function deleteVeiculouo($idUo, $placa)
   {
           $sql = new sql('','ad_veiculouo','(iduo = ?) and (placa= ?)');
	    $ok = $this->execute($sql->delete(array($idUo,$placa)));
           
           
       return $ok;
   
   }

	
}

	
?>