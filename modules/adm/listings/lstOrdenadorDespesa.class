<?
class lstOrdenadorDespesa extends Grid
{
	var $listURL;

	function lstOrdenadorDespesa()
	{
		global $MIOLO, $module, $page, $context, $self, $action, $perms;
		
	    $this->listURL = $MIOLO->GetActionURL($module,$self);
	    $login = $MIOLO->GetLogin();
		$usuario = $MIOLO->GetBusiness('common','usuario');
		$usuario->GetById($login->idkey);
		$idsetor = $usuario->GetSetorProvimento();
		$setor = $MIOLO->GetBusiness('common','setor');
		$setor->GetById($idsetor);		

		$objRequisicao = $MIOLO->GetBusiness('adm','requisicao');
        	$qryRequisicao = $objRequisicao->ListByOrdenador();

		$columns = array(
			   new GridColumn('Número','center', true, '20%',true),
			   new GridColumn('Data','center', true, '25%',true),
			   new GridColumn('Setor','center', true, '30%',true),
			   new GridColumn('Status','center', true, '40%',true),
			   new GridColumn('idrequisicao','center', true, '1%',false)
			);
		
		parent::__construct($qryRequisicao->result, $columns, $this->listURL,15,0);
		$this->SetTitle('Relação de Requisições para o Ordenador de Despesas');
		$href_edit = $MIOLO->GetActionURL('adm','main:itensOrdenador','%4%');
		$this->AddActionText('alt','Atender',$href_edit);
	}
}
?>
