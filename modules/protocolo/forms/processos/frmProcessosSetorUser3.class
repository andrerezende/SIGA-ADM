<?php
// 21-03-2012 - Tiago Macedo

global $MIOLO;
/**
 * Form contendo grid de processos enviados pelo usuário e que estão aguardando entrada em outro setor.
 *  grid com processos contendo apenas aqueles que o setor corrente deu saída, mas O SETOR DESTINO NÃO DEU ENTRADA.
 *
 */
class frmProcessosSetorUser3 extends MForm {
    // traga as informaçoes do usuario autenticado
    var $objUser;
    var $objSetor;

	function __construct($user) {
		global $MIOLO, $module, $action;
                $this->objUser = $user;
                $bussSetor  = $MIOLO->GetBusiness('common','setor');
                $this->objSetor = $bussSetor->getById($this->objUser->idSetor);

		parent::__construct("Processos aguardando entrada");
		//$this->SetClose($MIOLO->GetActionURL($module,'main:patrimonio'));
		$this->EventHandler();
	}

	function CreateFields() {
		global $MIOLO, $module, $action;

                $data["formClass"] = "frmProcessosSetorUser3";
                $data["setor"] = $this->objSetor->sigla;

                //      grid
		$grid = $this->manager->GetUI()->GetGrid('protocolo','gridProcessos', $data);
		$grid->SetTitle(NULL);

		$fields = array(
                    $grid,
                    new MSpacer(1),
		);

		$this->SetFields($fields);
		$this->defaultButton = false;
	}
}