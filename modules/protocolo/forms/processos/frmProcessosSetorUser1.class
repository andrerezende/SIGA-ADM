<?php
// 21-10-2011 - Daniel Bonfim

/**
 * Form contendo grid de processos que constam no setor do usuário logado e que não estão arquivados
 * 
 */
class frmProcessosSetorUser1 extends MForm {
    // traga as informaçoes do usuario autenticado
    var $objUser;
    var $objSetor;
    
	function __construct($user) {
		global $MIOLO, $module, $action;
                $this->objUser = $user;
                $bussSetor  = $MIOLO->GetBusiness('common','setor');
                $this->objSetor = $bussSetor->getById($this->objUser->idSetor);
                
		parent::__construct("Processos do Setor ".$this->objSetor->sigla." não arquivados"); 
		//$this->SetClose($MIOLO->GetActionURL($module,'main:patrimonio'));
		$this->EventHandler();
	}

	function CreateFields() {
		global $MIOLO, $module, $action;
                
                $data["formClass"] = "frmProcessosSetorUser";
                $data["setor"] = $this->objSetor->sigla;
                
                //      grid
		$grid = $this->manager->GetUI()->GetGrid('protocolo','gridProcessos', $data);
		$grid->SetTitle(NULL);
                		                
		$fields = array(
                    $grid,
                    new MSpacer(2),
		);

		$this->SetFields($fields);
		$this->defaultButton = false;
	}
}