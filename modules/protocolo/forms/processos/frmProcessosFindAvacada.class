<?
MIOLO::Import('modules::protocolo::controls::linkprocesso');
class frmProcessosFindAvacada extends MForm
{
    protected $processo;
    protected $setoracesso;
    protected $setor;
    protected $perms;
    protected $tipobox;
    function __construct()
    {
        global $MIOLO;
        $this->processo = $MIOLO->getBusiness('protocolo','processo');
        $this->setoracesso = $MIOLO->getBusiness('protocolo','setoracesso');
        $this->setor = $MIOLO->getBusiness('protocolo','setor');
        $this->perms  = $MIOLO->getPerms();
        parent::__construct('Pesquisa Avançada');
        $this->SetClose($this->manager->GetActionURL('protocolo','main'));
        $this->eventHandler();
    }
    function CreateFields()
    {
        global $MIOLO;
        $grid = $this->manager->GetUI()->GetGrid('protocolo','gridBuscaAvancada');
		$grid->setTitle('Resultado da busca');
        //TIPOS DE PROCESSO

		$lista = Form::GetFormValue('lista');
        $busca1 = Form::GetFormValue('numero');
        
        $titulo = Form::GetFormValue('titulo');
        $assunto = Form::GetFormValue('assunto');
        $solicitante = Form::GetFormValue('solicitante');
        $autor = Form::GetFormValue('autor');
        $instituicao = Form::GetFormValue('instituicao');
        $dataInicio = Form::GetFormValue('dataInicio');
        $dataFim = Form::GetFormValue('dataFim');
        $setorAtual = Form::GetFormValue('setorAtual');
        $setorOrigem = Form::GetFormValue('setorOrigem');
        $setorParticipante = Form::GetFormValue('setorParticipante');
        $cxArquivo = Form::GetFormValue('cxArquivo');
		$tipo2 = Form::GetFormValue('tipo');
		/*if ($tipo2 == 'Processo') $opcao1 = true;
		if ($tipo2 == 'Protocolado') $opcao2 = true;

		$opTipo = array('P'=>'Processo','A'=>'Protocolado');
        $opt1 = new MOption( 'opt1', $opTipo['P'],$opTipo['P'].'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;', $opcao1, 'id1' );
        $opt2 = new MOption( 'opt2', $opTipo['A'],$opTipo['A'].'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;', $opcao2, 'id2' );
        $tipo = new MRadioButtonGroup('tipo', '',array($opt1,$opt2), 'opt1','','horizontal','none');
        $tipo->addAttribute('style','padding:10px');*/

		/*$formBusca = new MThemeBox('&nbsp;&nbsp;Buscar processos por:',
                                    array( new MTextLabel('','Número'),new MTextField('numero',$busca1,'numero',20),new MTextLabel('','Tipo'),$tipo,new MTextLabel('','Título'),new MTextField('titulo',$titulo,'',50),new MTextLabel('','Assunto'),
                                           new MTextField('assunto',$assunto,'',50),new MTextLabel('','Sólicitante'), new MTextField('solicitante',$solicitante,'',40),new MTextLabel('','Autor (Deu Entrada)'), new MTextField('autor',$autor,'',40),
                                           new MTextLabel('','Instituição (UP)'), new MTextField('instituicao',$instituicao,'',20),new MTextLabel('','Período'),new MLabel('Data Início:'),new MCalendarField('dataInicio',$dataInicio,'',10),
                                           new MLabel('&nbsp;&nbsp;&nbsp;Data Fim:'),new MCalendarField('dataFim',$dataFim,'',10),new MTextLabel('','Setor Atual'), new MTextField('setorAtual',$setorAtual,'',30),new MTextLabel('','Setor de Origem'),
                                           new MTextField('setorOrigem',$setorOrigem,'',30),new MTextLabel('','Setor Participante'), new MTextField('setorParticipante',$setorParticipante,'',30),new MTextLabel('','Caixa Arquivo'),
                                           new MTextField('cxArquivo',$cxArquivo,'',20),new MTextLabel('', ''),new MButton('btnBuscar','Buscar') )
                                  );*/
                $fields = array(
            new Spacer('5px'),
            $formBusca,
            $formLink,
            $formListar,
            $grid,
        );
        $this->SetFields($fields);
        $this->defaultButton = false;
                
      }
}

?>
