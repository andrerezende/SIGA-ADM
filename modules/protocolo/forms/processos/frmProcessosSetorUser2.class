<?php
// 21-10-2011 - Daniel Bonfim

global $MIOLO;
/**
 * Form contendo grid de processos enviados pelo usuário e que estão aguardando entrada em outro setor.
 *  grid com processos contendo apenas aqueles que o setor corrente deu saída, mas O SETOR DESTINO NÃO DEU ENTRADA.
 * 
 */
class frmProcessosSetorUser2 extends MForm {
    // traga as informaçoes do usuario autenticado
    var $objUser;
    var $objSetor;
    
	function __construct($user) {
		global $MIOLO, $module, $action;
                $this->objUser = $user;
                $bussSetor  = $MIOLO->GetBusiness('common','setor');
                $this->objSetor = $bussSetor->getById($this->objUser->idSetor);
                
		parent::__construct("Processos enviados aguardando entrada"); 
		//$this->SetClose($MIOLO->GetActionURL($module,'main:patrimonio'));
		$this->EventHandler();
	}

	function CreateFields() {
		global $MIOLO, $module, $action;

                $data["formClass"] = "frmProcessosSetorUser2";
                $data["setor"] = $this->objSetor->sigla;
                
                //      grid
		//$grid = $this->manager->GetUI()->GetGrid('protocolo','gridProcessos', $data);
                $grid = $this->manager->GetUI()->GetGrid('protocolo','gridProcessosAguardandoEntada', $data);
		$grid->SetTitle(NULL);
                
		$fields = array(			
                    $grid,
                    new MSpacer(1),
		);

		$this->SetFields($fields);
		$this->defaultButton = false;
	}
}