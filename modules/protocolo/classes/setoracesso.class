<?
class BusinessProtocoloSetorAcesso extends Business
{
	public $setor;
    public $setorFilho;
    function __construct($data=NULL)
    {
        $this->Business('sigaept',$data);
    }
    function listSetoresAcesso($setor)
    {
        $criteria = $this->getCriteria();
        $criteria->addCriteria('setor','=',"'$setor'");
        $criteria->addOrderAttribute('setorFilho');
        return $criteria->retrieveAsQuery()->result;
    }
    function selSetoresAcesso($setor)
    {
        $resultados = $this->listSetoresAcesso($setor);
        if ($resultados)
        {
            foreach ($resultados as $resultado) $setores[] = $resultado[1];
            array_unshift($setores,$setor);
        }
        else 
        {
            $setores[] = $setor;
        }
        return array_combine($setores,$setores);
    }
    function getSetorFilho($setorOrigem)
    {
        $criteria =  $this->getCriteria();
        $criteria->addColumnAttribute('setorFilho');
        $criteria->addCriteria('setor','=',"'$setorOrigem'");
        return $criteria->retrieveAsQuery();
    }
}
?>
