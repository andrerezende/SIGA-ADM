<?
MIOLO::Import('modules::protocolo::controls::linkobject');
class LinkProcesso extends LinkObject
{
    public function __construct($numero='', $processo)
    {
        global $MIOLO;
        $MIOLO->UsesBusiness('protocolo','processo');
        parent::__construct($numero,$processo,'documento_mini.png');
    }
    public function setObjectByValue($value)
    {
        global $MIOLO;
        $this->object = $MIOLO->GetBusiness('protocolo','processo');
        $this->object->GetByNumero($value);
    }
    public function setAction()
    {
        $this->hyperlink->SetAction('protocolo','main:processos',$this->object->numProcesso);
        $this->imagelink->SetAction('protocolo','main:processos',$this->object->numProcesso);
    }
    public function setText()
    {
        $this->hyperlink->SetText($this->object->numProcessoComInstituicao());
    }
    public function setNew()
    {
        global $MIOLO;
        $this->isNewLink = TRUE;
        $this->hyperlink->SetAction('protocolo','main:processos:new');
        $this->hyperlink->SetText('Abertura de processo');
        $this->imagelink->SetAction('protocolo','main:processos:new');
        $this->imagelink->image = new MImage('','',$MIOLO->GetUI()->GetImage(self::MODULE,'novo_mini.png'));
    }
    public function setNewVago()
    {
        global $MIOLO;
        $this->isNewLink = TRUE;
        $this->hyperlink->SetAction('protocolo','main:processos:vagos');
        $this->hyperlink->SetText('Inserir Processo Vago');
        $this->imagelink->SetAction('protocolo','main:processos:vagos');
        $this->imagelink->image = new MImage('','',$MIOLO->GetUI()->GetImage(self::MODULE,'vago_mini.png'));
    }
    public function setConsulta()
    {
        global $MIOLO;
        $this->isNewLink = TRUE;
        $this->hyperlink->SetAction('protocolo','main:busca');
        $this->hyperlink->SetText('Outras Consultas');
        $this->imagelink->SetAction('protocolo','main:busca');
        $this->imagelink->image = new MImage('','',$MIOLO->GetUI()->GetImage(self::MODULE,'find.png'));
    }
    public function setDocumentacao()
    {
        global $MIOLO;
        $this->isNewLink = TRUE;
        $this->hyperlink->SetAction('protocolo','main:documentos:hierarquia');
        $this->hyperlink->SetText('Hierarquia');
        $this->imagelink->SetAction('protocolo','main:documentos:hierarquia');
        $this->imagelink->image = new MImage('','',$MIOLO->GetUI()->GetImage(self::MODULE,'report_mini.png'));
    }
    public function setProcessosAbertos()
    {
        global $MIOLO;
        $this->isNewLink = TRUE;
        $this->hyperlink->SetAction('protocolo','main:documentos:processosabertos');
        $this->hyperlink->SetText('Processos Abertos');
        $this->imagelink->SetAction('protocolo','main:documentos:processosabertos');
        $this->imagelink->image = new MImage('','',$MIOLO->GetUI()->GetImage(self::MODULE,'report_mini.png'));
    }
	//03/04/2012 - Tiago Macedo
	public function setProcessosTramitados()
    {
        global $MIOLO;
        $this->isNewLink = TRUE;
        $this->hyperlink->SetAction('protocolo','main:documentos:processostramitados');
        $this->hyperlink->SetText('Processos Tramitados');
        $this->imagelink->SetAction('protocolo','main:documentos:processostramitados');
        $this->imagelink->image = new MImage('','',$MIOLO->GetUI()->GetImage(self::MODULE,'report_mini.png'));
    }
    // 31-10-2011 - Daniel Bonfim
    public function setProcessosPendentes()
    {
        global $MIOLO;
        $this->isNewLink = TRUE;
        $this->hyperlink->SetAction('protocolo','main:processos:pendentes');
        $this->hyperlink->SetText('Processos Pendentes');
        $this->imagelink->SetAction('protocolo','main:processos:pendentes');
        $this->imagelink->image = new MImage('','',$MIOLO->GetUI()->GetImage(self::MODULE,'report_mini.png'));
    }
    public function setBuscaAvancada()
    {
    	global $MIOLO;
    	$this->isNewLink = true;
    	$this->hyperlink->SetAction('protocolo', 'main:processos:findAdvanced');
    	$this->hyperlink->SetText('Busca avançada');
    	$this->imagelink->SetAction('protocolo','main:processos:findAdvanced');
    	$this->imagelink->image = new MImage('', '', $MIOLO->GetUI()->GetImage(self::MODULE,'sherlock.png'));
    }
	public function setIRPF() {
    	global $MIOLO;
    	$this->isNewLink = true;
    	$this->hyperlink->SetAction('protocolo', 'main:processos:irpf');
    	$this->hyperlink->SetText('Lista IRPF');
    	$this->imagelink->SetAction('protocolo','main:processos:irpf');
    	$this->imagelink->image = new MImage('', '', $MIOLO->GetUI()->GetImage(self::MODULE,'report_mini.png'));
    }
    
    // 12/09/2011 - Daniel Bonfim
        public function setProcessosMaxNumanda() {            
            global $MIOLO;
            $this->isNewLink = true;
            /*
            $this->hyperlink = new HyperLink($this->name,'ERRO', "http://".$_SERVER['HTTP_HOST']."/relatorios2/repProcessosBySetor.php");            
            $this->hyperlink->SetText('Processo de um Setor');
            $this->imagelink = new ImageLink('image'.$this->name,'ERRO',"http://".$_SERVER['HTTP_HOST']."/relatorios2/repProcessosBySetor.php",$this->image,$attrs=NULL);
            $this->imagelink->image = new MImage('', '', $MIOLO->GetUI()->GetImage(self::MODULE,'report_mini.png'));            
             * 
             */
            // 11-10-2011 - Daniel Bonfim
            // POR SETOR
            $this->hyperlink->SetAction('protocolo', 'main:processos:processosBySetor');
            $this->hyperlink->SetText('Processos de um Setor');
            $this->hyperlink->SetAction('protocolo', 'main:processos:processosBySetor');
            $this->imagelink->image = new MImage('', '', $MIOLO->GetUI()->GetImage(self::MODULE,'report_mini.png'));            
        }
        
        // 19/09/2011 - Daniel Bonfim
        public function setUsuarios() {
            global $MIOLO;
            $this->isNewLink = true;
            $this->hyperlink = new HyperLink($this->name,'ERRO', "http://".$_SERVER['HTTP_HOST']."/relatorios2/repUsersFromAllSetores.php");
            $this->hyperlink->SetText('Usuário por Setor');
            $this->imagelink = new ImageLink('image'.$this->name,'ERRO',"http://".$_SERVER['HTTP_HOST']."/relatorios2/repUsersFromAllSetores.php",$this->image,$attrs=NULL);
            $this->imagelink->image = new MImage('', '', $MIOLO->GetUI()->GetImage(self::MODULE,'report_mini.png'));            
        }
        
        // 19/09/2011 - Daniel Bonfim
        public function setUsuariosPorSetor() {
            global $MIOLO;
            $this->isNewLink = true;
            // isto levaria diretamente a um link externo
            //$this->hyperlink = new HyperLink($this->name,'ERRO', "http://".$_SERVER['HTTP_HOST']."/relatorios2/repProcessosBySetor.php");
            // 22-09-2011 - Daniel Bonfim
            $this->hyperlink->SetAction('protocolo', 'main:processos:usuariosBySetor');
            $this->hyperlink->SetText('Usuário de um Setor');
            $this->hyperlink->SetAction('protocolo', 'main:processos:usuariosBySetor');
            $this->imagelink->image = new MImage('', '', $MIOLO->GetUI()->GetImage(self::MODULE,'report_mini.png'));            
        }
        public function setVersaoSistemaNew() {
            global $MIOLO;
            $this->isNewLink = true;
            $this->hyperlink->SetAction('protocolo', 'main:versaosistemas');
            $this->hyperlink->SetText('Versão do Sistema');
            $this->hyperlink->SetAction('protocolo', 'main:versaosistemas');
            $this->imagelink->image = new MImage('', '', $MIOLO->GetUI()->GetImage(self::MODULE,'MAD.png'));            
        }
}
?>
